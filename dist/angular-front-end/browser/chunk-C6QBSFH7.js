import{a as K}from"./chunk-Y7MBL22L.js";import{f as $}from"./chunk-WU2B4YHF.js";import{a as R,b as S,c as j,d as q,f as C,g as z,i as Y,j as G,p as U,r as B}from"./chunk-MWPMWWIU.js";import{g as W,i as v}from"./chunk-ZFVO5NLJ.js";import{$ as E,Ab as r,Bb as T,Cb as k,Ga as I,Ib as O,Ja as s,Ka as x,Mb as A,Ob as M,Y as V,_a as g,cb as m,ec as P,fc as L,gb as w,ha as _,ia as b,kb as n,lb as t,mb as u,mc as N,nc as D,qb as y,sb as f,tb as h,vb as F}from"./chunk-Q57VKX57.js";function H(i,c){i&1&&(n(0,"small"),r(1,"*Vehicle Image is required"),t())}function J(i,c){i&1&&(n(0,"small"),r(1,"*Vehicle Image is required"),t())}function Q(i,c){if(i&1&&(n(0,"p",25),r(1),A(2,"slice"),t()),i&2){let a=h();s(),T(M(2,1,a.previousImage,21))}}function X(i,c){if(i&1){let a=y();n(0,"button",26),f("click",function(){_(a);let o=h();return b(o.onSubmitEdit())}),r(1," Submit Edit"),t()}}function Z(i,c){if(i&1){let a=y();n(0,"button",26),f("click",function(){_(a);let o=h();return b(o.onCancel())}),r(1," Cancel "),t()}}function ee(i,c){if(i&1){let a=y();n(0,"button",27),f("click",function(){_(a);let o=h();return b(o.onSubmit())}),r(1," Submit "),t()}if(i&2){let a=h();m("disabled",a.vehicleForm.invalid)}}function te(i,c){i&1&&(n(0,"div",24)(1,"h3"),r(2,"No Data found"),t()())}function ie(i,c){if(i&1){let a=y();n(0,"div",29)(1,"div",30),r(2),t(),n(3,"div",31),u(4,"img",32),t(),n(5,"div",33),r(6),t(),n(7,"div",33)(8,"button",34),f("click",function(){let o=_(a).index,l=h(2);return b(l.onEdit(o))}),r(9," Edit "),t()(),n(10,"div",33)(11,"button",35),f("click",function(){let o=_(a).index,l=h(2);return b(l.onDelete(o))}),r(12," Delete "),t()()()}if(i&2){let a=c.$implicit,e=c.index;s(2),k("\xA0\xA0\xA0",e+1,""),s(2),F("src","http://44.201.133.98:3000/",a.vehicleImage,"",I),s(2),T(a.type)}}function ne(i,c){if(i&1&&g(0,ie,13,4,"div",28),i&2){let a=h();m("ngForOf",a.vehiclesList)}}var fe=(()=>{let c=class c{constructor(e,o,l){this.fb=e,this.authService=o,this.vehicleTypeService=l,this.vehiclesList=[],this.image=null,this.formdata=new FormData,this.isEdit=!1,this.selectedImg="",this.vehicleTypes=["SEDAN","SUV","MINI VAN","PICK UP"],this.previousImage="",this.toastr=V(W),this.vehicleForm=this.fb.group({vehicleImage:new C(null,[S.required]),type:new C(null,[S.required])})}ngOnInit(){this.getVehiclesData()}onSubmit(){this.formdata.append("type",this.vehicleForm.value.type),console.log(this.formdata),this.vehicleTypeService.postVehicleType(this.formdata).subscribe({next:e=>{e.vehicles&&(this.toastr.success("Vehicle-type added","Success",v.TROASTR_STYLE),this.vehiclesList=e.vehicles)}}),this.vehicleForm.reset(),this.formdata=new FormData}getVehiclesData(){this.vehicleTypeService.getVehicleTypes().subscribe({next:e=>{e.vehicle&&(this.vehiclesList=e.vehicle)}})}onSubmitEdit(){this.formdata.append("type",this.vehicleForm.value.type),this.vehicleForm.dirty?this.vehicleTypeService.putVehicleType(this.formdata).subscribe({next:e=>{e.vehicles&&(this.toastr.success("Vehicle-type updated","Success",v.TROASTR_STYLE),this.vehiclesList=e.vehicles)}}):this.toastr.info("No changes made","Info",v.TROASTR_STYLE),this.onCancel()}onFileChange(e){e.target.files&&e.target.files.length&&(e.target.files[0].type!="image/png"&&e.target.files[0].type!="image/jpeg"?(this.toastr.warning(`${e.target.files[0].type} is not supported Upload Image/png/jpeg`,"Warning",v.TROASTR_STYLE),this.vehicleForm.reset()):(this.formdata.delete("vehicleImage"),e.target.files[0].size<4e6?this.formdata.append("vehicleImage",e.target.files[0]):(this.toastr.warning("file is too large try to upload smaller file","Warning",v.TROASTR_STYLE),this.vehicleForm.reset())))}onEdit(e){this.isEdit=!0;let o=this.vehiclesList[e];this.formdata.append("id",o._id),this.formdata.append("prvImg",o.vehicleImage),this.previousImage=o.vehicleImage,this.vehicleForm.patchValue({type:this.vehiclesList[e].type})}onDelete(e){confirm("Are you sure want to delete?")&&this.vehicleTypeService.deleteVehicleType(this.vehiclesList[e]._id).subscribe({next:o=>{o.vehicles&&(this.toastr.success("Vehicle-type deleted","Success",v.TROASTR_STYLE),this.vehiclesList=o.vehicles)}})}onCancel(){this.isEdit=!1,this.formdata=new FormData,this.vehicleForm.reset()}};c.\u0275fac=function(o){return new(o||c)(x(U),x($),x(K))},c.\u0275cmp=E({type:c,selectors:[["app-vehicle-type"]],standalone:!0,features:[O],decls:44,vars:8,consts:[[1,"m-2",2,"width","82dvw"],[1,"container","m-0","p-0"],[1,"row"],[1,"col-3"],[1,"col-6"],["id","vehicle-registration-form",1,"container-fluid","mt-2","mb-4",2,"background-color","rgb(172, 170, 167)"],[3,"ngSubmit","formGroup"],[1,"d-flex","flex-column","justify-content-center"],[1,"form-group"],["for","type"],["type","text","formControlName","type","placeholder","Enter Vehicle Type",1,"mt-3","form-control"],[4,"ngIf"],["for","vehicleName"],["type","file","id","vehicleImage","formControlName","vehicleImage","accept","image/*",1,"mt-3","form-control",3,"change"],["class","oldProfile",4,"ngIf"],["clsss","form-group"],["type","button","class","btn btn-dark",3,"click",4,"ngIf"],["type","button","class","btn btn-dark",3,"disabled","click",4,"ngIf"],[1,"row","ms-1"],[1,"col-1"],[1,"col-5"],[1,"col-2"],[1,"col-4","d-flex","justify-content-center","align-content-center"],[1,"container","scrollable-section","m-0","p-0"],[1,"row","text-align-center","align-self-center","justify-content-center",2,"height","300px","align-content","center"],[1,"oldProfile"],["type","button",1,"btn","btn-dark",3,"click"],["type","button",1,"btn","btn-dark",3,"click","disabled"],["class","row vehicles-row mb-2",4,"ngFor","ngForOf"],[1,"row","vehicles-row","mb-2"],[1,"col-1","align-self-center"],[1,"col-5","align-self-center"],["height","120px","width","180px","alt","img",3,"src"],[1,"col-2","align-self-center"],["id","editbutton",1,"btn","btn-success",3,"click"],["id","deletebutton",1,"btn","btn-large","btn-danger",3,"click"]],template:function(o,l){if(o&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),u(3,"div",3),n(4,"div",4)(5,"div",5)(6,"form",6),f("ngSubmit",function(){return l.onSubmit()}),n(7,"div",7)(8,"div",8)(9,"label",9),r(10,"Vehicle Type"),t(),u(11,"input",10),g(12,H,2,0,"small",11),t(),n(13,"div",8)(14,"label",12),r(15,"Vehicle Image"),t(),u(16,"br"),n(17,"input",13),f("change",function(d){return l.onFileChange(d)}),t(),g(18,J,2,0,"small",11)(19,Q,3,4,"p",14),t(),n(20,"div",15),g(21,X,2,0,"button",16),r(22,"\xA0\xA0\xA0\xA0 "),g(23,Z,2,0,"button",16)(24,ee,2,1,"button",17),t()()()()(),u(25,"div",3),t(),u(26,"hr"),n(27,"div",18)(28,"div",19)(29,"h5"),r(30,"Index"),t()(),n(31,"div",20)(32,"h5"),r(33,"Vehicle Image"),t()(),n(34,"div",21)(35,"h5"),r(36,"Vehicle Type"),t()(),n(37,"div",22)(38,"h5"),r(39,"Actions"),t()()(),u(40,"hr"),t(),n(41,"div",23),g(42,te,3,0,"div",24)(43,ne,1,1),t()()),o&2){let p,d;s(6),m("formGroup",l.vehicleForm),s(6),m("ngIf",((p=l.vehicleForm.get("type"))==null||p.errors==null?null:p.errors.required)&&(((p=l.vehicleForm.get("type"))==null?null:p.dirty)||((p=l.vehicleForm.get("type"))==null?null:p.touched))),s(6),m("ngIf",((d=l.vehicleForm.get("vehicleImage"))==null||d.errors==null?null:d.errors.required)&&(((d=l.vehicleForm.get("vehicleImage"))==null?null:d.dirty)||((d=l.vehicleForm.get("vehicleImage"))==null?null:d.touched))),s(),m("ngIf",l.isEdit),s(2),m("ngIf",l.isEdit),s(2),m("ngIf",l.isEdit),s(),m("ngIf",!l.isEdit),s(18),w(42,l.vehiclesList.length<0?42:43)}},dependencies:[B,z,R,j,q,Y,G,D,P,L,N],styles:[".scrollable-section[_ngcontent-%COMP%]{max-height:47vh;overflow-y:auto;overflow-x:hidden}#vehicle-registration-form[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:20px;border-radius:8px;box-shadow:0 0 10px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{font-weight:700}input[type=text][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #d8dde3;border-radius:4px;box-sizing:border-box}select[_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;-moz-appearance:none;background-repeat:no-repeat;background-position:right 8px center;background-size:24px 24px}select[_ngcontent-%COMP%]:focus{border-color:#007bff}button[type=submit][_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s ease}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0056b3}button[type=submit][_ngcontent-%COMP%]:focus{outline:none}.vehicles-row[_ngcontent-%COMP%]{background-color:#eaebec;font-size:1.5rem}hr[_ngcontent-%COMP%]{height:2px;background-color:#000}"]});let i=c;return i})();export{fe as VehicleTypeComponent};
