import{a as J}from"./chunk-NIHIRCKG.js";import{f as H}from"./chunk-WU2B4YHF.js";import{a as z,b as h,c as W,d as q,e as G,f as b,g as D,i as U,j as Y,r as $}from"./chunk-MWPMWWIU.js";import{g as Z,i as v}from"./chunk-ZFVO5NLJ.js";import{$ as O,Ab as i,Bb as f,Cb as N,Eb as F,Fb as A,Ga as k,Gb as M,Ib as j,Ja as c,Ka as w,Y as I,_a as y,cb as m,ec as B,fc as L,gb as R,ha as x,ia as S,kb as t,lb as e,mb as p,nc as V,qb as P,sb as C,tb as g,ub as E}from"./chunk-Q57VKX57.js";function K(l,u){if(l&1&&(t(0,"p",32),i(1),e()),l&2){let d=u.$implicit;c(),N(" ",d," ")}}function Q(l,u){if(l&1&&(t(0,"div",9)(1,"div",4),i(2),e(),t(3,"div",4),i(4),e(),t(5,"div",4),p(6,"img",30),e(),t(7,"div",4),i(8),e(),t(9,"div",4),i(10),e(),t(11,"div",7),y(12,K,2,1,"p",31),p(13,"br"),e()()),l&2){let d=u.$implicit,o=u.index;c(2),N("\xA0\xA0\xA0",o+1,""),c(2),f(d.countryName),c(2),E("src",d.FlagUrl,k),E("alt",d.countryName),c(2),f(d.countryCallCode),c(2),f(d.currency),c(2),m("ngForOf",d.timezones)}}function X(l,u){if(l&1&&y(0,Q,14,7,"div",29),l&2){let d=g();m("ngForOf",d.filteredCountry)}}function ee(l,u){l&1&&(t(0,"div",33)(1,"h2"),i(2,"No Country Added"),e()())}function te(l,u){l&1&&(t(0,"small",34),i(1,"*CountryName should not be empty"),e())}function ne(l,u){if(l&1){let d=P();t(0,"div",18)(1,"div",35)(2,"div",21)(3,"label",36),i(4,"Currency"),e(),t(5,"input",37),M("ngModelChange",function(a){x(d);let r=g();return A(r.countrycurrency,a)||(r.countrycurrency=a),S(a)}),e()()(),p(6,"div",7),t(7,"div",35)(8,"div",21)(9,"label",38),i(10,"Country Code"),e(),t(11,"input",39),M("ngModelChange",function(a){x(d);let r=g();return A(r.countrycallcode,a)||(r.countrycallcode=a),S(a)}),e()()()()}if(l&2){let d=g();c(5),m("disabled",!0),F("ngModel",d.countrycurrency),c(6),m("disabled",!0),F("ngModel",d.countrycallcode)}}var pe=(()=>{let u=class u{constructor(o,a){this.countryService=o,this.authService=a,this.toBeAddedCountry=null,this.AddedCountry=[],this.filteredCountry=[],this.countryname="",this.countrycurrency="",this.countrycallcode="",this.toastr=I(Z),this.countryForm=new G({countryName:new b(null,[h.required]),currency:new b(null,[h.required]),countryCallCode:new b(null,[h.required])})}ngOnInit(){this.getCountries()}onInputCountryName(o){this.countryname=o.target.value}onSearchCountry(){let o=this.countryname,a=new RegExp(`^${o}$`,"gi");this.countryService.getCountriesFromApi().subscribe({next:r=>{for(let n of r)if(n.name.common.match(a)){let s=n.currencies,T=Object.keys(s).toString(),_={countryName:n.name.common,currencyISOName:Object.keys(s).toString().toLowerCase(),countryCallCode:n.idd.root+n.idd.suffixes[0],currency:n.currencies[T].name+` (${n.currencies[T].symbol})`,timezones:n.timezones,FlagUrl:n.flags.png,latlng:{lat:n.latlng[0],lng:n.latlng[1]},countryShortName:n.cca2};this.countrycallcode=_.countryCallCode,this.countrycurrency=_.currency,this.toBeAddedCountry=_;break}else continue;this.toBeAddedCountry==null&&(this.toastr.error(`no country found with name ${o}`,"Error",v.TROASTR_STYLE),this.countryname="",this.countryForm.reset())},error:r=>{this.toastr.error("Unable to connect with Countries API","Error",v.TROASTR_STYLE)}})}onAddCountry(){this.countryForm.invalid||this.countryService.postCountry(this.toBeAddedCountry).subscribe({next:o=>{o.country&&(this.toastr.success(`Country ${o.country.countryName} added`,"Success",v.TROASTR_STYLE),this.filteredCountry.push(o.country),this.countryForm.reset(),this.toBeAddedCountry=null)}})}searchCountry(o){let a=o.target.value,r=new RegExp(a,"gi");this.filteredCountry=this.AddedCountry.filter(n=>RegExp(r).exec(n.countryName))}getCountries(){this.countryService.getCountries().subscribe({next:o=>{o.countries&&(this.AddedCountry=o.countries,this.filteredCountry=o.countries)}})}};u.\u0275fac=function(a){return new(a||u)(w(J),w(H))},u.\u0275cmp=O({type:u,selectors:[["app-country"]],standalone:!0,features:[j],decls:55,vars:6,consts:[[1,"container","m-2",2,"width","82.5dvw"],[1,"row","title-row","text-white","mb-3"],[1,"col-5","align-self-center"],["type","search","name","country","id","country","placeholder","Search",3,"input"],[1,"col-2","align-self-center"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-large",2,"background-color","rgb(8, 182, 8)","width","6rem"],[1,"row","mb-2"],[1,"col-2"],[1,"row","scrollable-section"],["id","country-row",1,"row","mb-2"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-3"],[1,"col-6"],[1,"form-group"],["for","countryName"],["type","text","name","countryName","id","countryName","formControlName","countryName",1,"form-control",3,"input"],["class","text-danger",4,"ngIf"],["class","row",4,"ngIf"],[1,"modal-footer","justify-content-between"],["type","button",1,"btn","btn-primary","btn-large",3,"click","disabled"],["type","button","data-bs-dismiss","modal",1,"btn","btn-priary","btn-large","bg-dark",2,"color","whitesmoke",3,"click","disabled"],["id","country-row","class","row mb-2",4,"ngFor","ngForOf"],["height","50","width","80",3,"src","alt"],["class","align-self-center",4,"ngFor","ngForOf"],[1,"align-self-center"],[1,"row","text-center","align-self-center","justify-content-center",2,"height","500px","align-content","center"],[1,"text-danger"],[1,"col-4"],["for","Currency"],["type","text","name","currency","id","currency","formControlName","currency",1,"form-control",3,"ngModelChange","disabled","ngModel"],["for","countryCallCode"],["type","text","name","countryCallCode","id","countryCallCode","formControlName","countryCallCode",1,"form-control",3,"ngModelChange","disabled","ngModel"]],template:function(a,r){if(a&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),i(4,"Country"),e()(),t(5,"div",2)(6,"input",3),C("input",function(s){return r.searchCountry(s)}),e()(),t(7,"div",4)(8,"button",5),i(9," Add "),e()()(),t(10,"div",6)(11,"div",7)(12,"b"),i(13,"Index"),e()(),t(14,"div",7)(15,"b"),i(16,"Name"),e()(),t(17,"div",7)(18,"b"),i(19,"Flag"),e()(),t(20,"div",7)(21,"b"),i(22,"Call code"),e()(),t(23,"div",7)(24,"b"),i(25,"Currency"),e()(),t(26,"div",7)(27,"b"),i(28,"TimeZones"),e()()(),t(29,"div",8),y(30,X,1,1,"div",9)(31,ee,3,0),e()(),t(32,"div",10)(33,"div",11)(34,"div",12)(35,"div",13)(36,"h1",14),i(37,"Search Country"),e(),p(38,"button",15),e(),t(39,"div",16)(40,"form",17),C("ngSubmit",function(){return r.onAddCountry()}),t(41,"div",18),p(42,"div",19),t(43,"div",20)(44,"div",21)(45,"label",22),i(46,"Country Name"),e(),t(47,"input",23),C("input",function(s){return r.onInputCountryName(s)}),e(),y(48,te,2,0,"small",24),e()()(),y(49,ne,12,4,"div",25),e()(),t(50,"div",26)(51,"button",27),C("click",function(){return r.onSearchCountry()}),i(52," Find Country "),e(),t(53,"button",28),C("click",function(){return r.onAddCountry()}),i(54," Add Country "),e()()()()()),a&2){let n;c(30),R(30,r.filteredCountry.length>0?30:31),c(10),m("formGroup",r.countryForm),c(8),m("ngIf",((n=r.countryForm.get("countryName"))==null||n.errors==null?null:n.errors.required)&&((n=r.countryForm.get("countryName"))==null?null:n.touched)),c(),m("ngIf",r.toBeAddedCountry),c(2),m("disabled",r.countryname===""),c(2),m("disabled",r.countryForm.invalid)}},dependencies:[V,B,L,$,D,z,W,q,U,Y],styles:[".title-row[_ngcontent-%COMP%]{height:4rem;background-color:#343a40}input[type=search][_ngcontent-%COMP%]{padding:8px 10px;border:1px solid #ccc;border-radius:5px;font-size:16px;width:200px;color:#000}input[type=search][_ngcontent-%COMP%]::placeholder{color:#999}input[type=search][_ngcontent-%COMP%]:hover{border-color:#10ad23}.add-btn[_ngcontent-%COMP%]{background-color:#c7c8d7}.scrollable-section[_ngcontent-%COMP%]{max-height:83vh;overflow-y:auto;overflow-x:hidden}#country-row[_ngcontent-%COMP%]{border:3px solid black;background-color:#b7b8bc;border-radius:5px;font-size:1.5vw}"]});let l=u;return l})();export{pe as CountryComponent};
